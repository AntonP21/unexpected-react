<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0">
    <link rel="stylesheet" href="static/normalize.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="static/main.css" type="text/css" media="screen" />
    <link rel="shortcut icon" type="image/vnd.microsoft.icon" href="static/bug-icon-black.ico">
    <title>unexpected-react</title>
</head>
<body class="sidebar-hidden theme-dark"> 
    <header>
        <div class="logo-icon"></div>
        <nav>
            <ul>
                <li class="menu-toggle-item">
                    <button class="menu-toggle" onclick="toggleSidebar()"></button>
                </li>
                
                <li class="active"><a href="">unexpected-react</a></li>
                
                
                <li class=""><a href="assertions/ReactElement/queried-for">Assertions</a></li>
                
                
                
            </ul>
        </nav>
        <div class="search" style="visibility: hidden">
            <input id="search" placeholder="Search..." value="">
            <div id="searchDropDown" class="dropDown">
                <ul id="searchResults"></ul>
            </div>
        </div>
    </header>

<div class="main" tabindex="-1">
    <div class="content">
        <h1 id="unexpected-react">unexpected-react</h1>
<p>Plugin for <a href="https://unexpected.js.org">unexpected</a> to allow for testing the full virtual DOM, and 
against the shallow renderer (replaces <a href="https://github.com/bruderstein/unexpected-react-shallow">unexpected-react-shallow</a>)</p>
<p>!<img src="https://cloud.githubusercontent.com/assets/91716/11253997/c5d2a9b4-8e3e-11e5-8da5-2df95598865c.png" alt="output_demo"></p>
<p>See the blog post for an introduction: <a href="https://medium.com/@bruderstein/the-missing-piece-to-the-react-testing-puzzle-c51cd30df7a0">https://medium.com/@bruderstein/the-missing-piece-to-the-react-testing-puzzle-c51cd30df7a0</a></p>
<h1 id="features">Features</h1>
<ul>
<li>Assert React component&#39;s output using the <a href="http://facebook.github.io/react/docs/test-utils.html#shallow-rendering">shallow renderer</a></li>
<li>Assert React component&#39;s output using the full renderer and JSX &quot;expected&quot; values (e.g. <code>TestUtils.renderIntoDocument()</code>) </li>
<li>Assert React component&#39;s output using the test renderer (<a href="https://www.npmjs.com/package/react-test-renderer">react-test-renderer</a> (require <code>unexpected-react/test-renderer</code>)</li>
<li>Trigger events on components in shallow, full and test renderers</li>
<li>Locate components using JSX queries in shallow, full and test renderers</li>
<li>All assertions work identically with the shallow, full and test renderers, allowing you to mix and match in your tests, based on what you need.</li>
</ul>
<h1 id="examples">Examples</h1>
<ul>
<li>Checking a simple render</li>
</ul>
<div class="code lang-javascript"><div><span style="color: #F92672">var</span>&nbsp;todoList&nbsp;<span style="color: #F92672">=</span>&nbsp;TestUtils<span style="color: #999">.</span>renderIntoDocument<span style="color: #999">(</span></div><div>&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>TodoList<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>TodoItem&nbsp;id<span style="color: #F92672">=</span><span style="color: #999">{</span><span style="color: #66D9EF; font-weight: bold">1</span><span style="color: #999">}</span>&nbsp;label<span style="color: #F92672">=</span><span style="color: #E6DB74">&quot;Buy&nbsp;flowers&nbsp;for&nbsp;the&nbsp;wife&quot;</span><span style="color: #F92672">/&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>TodoItem&nbsp;id<span style="color: #F92672">=</span><span style="color: #999">{</span><span style="color: #66D9EF; font-weight: bold">2</span><span style="color: #999">}</span>&nbsp;label<span style="color: #F92672">=</span><span style="color: #E6DB74">&quot;Mow&nbsp;the&nbsp;lawn&quot;</span><span style="color: #F92672">/&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>TodoItem&nbsp;id<span style="color: #F92672">=</span><span style="color: #999">{</span><span style="color: #66D9EF; font-weight: bold">3</span><span style="color: #999">}</span>&nbsp;label<span style="color: #F92672">=</span><span style="color: #E6DB74">&quot;Buy&nbsp;groceries&quot;</span><span style="color: #F92672">/&gt;</span></div><div>&nbsp;&nbsp;<span style="color: #F92672">&lt;/</span>TodoList<span style="color: #F92672">&gt;</span></div><div><span style="color: #999">);</span></div><div>&nbsp;</div><div>expect<span style="color: #999">(</span></div><div>&nbsp;&nbsp;todoList<span style="color: #999">,</span></div><div>&nbsp;&nbsp;<span style="color: #E6DB74">'to&nbsp;have&nbsp;rendered'</span><span style="color: #999">,</span>&nbsp;</div><div>&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>TodoList<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>div&nbsp;className<span style="color: #F92672">=</span><span style="color: #E6DB74">'items'</span><span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>TodoItem&nbsp;id<span style="color: #F92672">=</span><span style="color: #999">{</span><span style="color: #66D9EF; font-weight: bold">1</span><span style="color: #999">}</span><span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>span&nbsp;className<span style="color: #F92672">=</span><span style="color: #E6DB74">&quot;label&quot;</span><span style="color: #F92672">&gt;</span>Buy&nbsp;flowers&nbsp;<span style="color: #F92672">for</span>&nbsp;the&nbsp;wife<span style="color: #F92672">&lt;/</span>span<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;/</span>TodoItem<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>TodoItem&nbsp;id<span style="color: #F92672">=</span><span style="color: #999">{</span><span style="color: #66D9EF; font-weight: bold">2</span><span style="color: #999">}</span><span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>span&nbsp;className<span style="color: #F92672">=</span><span style="color: #E6DB74">&quot;label&quot;</span><span style="color: #F92672">&gt;</span>Mow&nbsp;the&nbsp;lawn<span style="color: #F92672">&lt;/</span>span<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;/</span>TodoItem<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>TodoItem&nbsp;id<span style="color: #F92672">=</span><span style="color: #999">{</span><span style="color: #66D9EF; font-weight: bold">3</span><span style="color: #999">}</span><span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>span&nbsp;className<span style="color: #F92672">=</span><span style="color: #E6DB74">&quot;label&quot;</span><span style="color: #F92672">&gt;</span>Buy&nbsp;groceries<span style="color: #F92672">&lt;/</span>span<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;/</span>TodoItem<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;/</span>div<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;<span style="color: #F92672">&lt;/</span>TodoList<span style="color: #F92672">&gt;</span></div><div><span style="color: #999">);</span></div></div><ul>
<li>Triggering an event on a button inside a subcomponent (using the <code>eventTarget</code> prop to identify where the event should be triggered)</li>
</ul>
<div class="code lang-javascript"><div>expect<span style="color: #999">(</span></div><div>&nbsp;&nbsp;todoList<span style="color: #999">,</span></div><div>&nbsp;&nbsp;<span style="color: #E6DB74">'with&nbsp;event&nbsp;click'</span><span style="color: #999">,</span></div><div>&nbsp;&nbsp;<span style="color: #E6DB74">'on'</span><span style="color: #999">,</span>&nbsp;<span style="color: #F92672">&lt;</span>TodoItem&nbsp;id<span style="color: #F92672">=</span><span style="color: #999">{</span><span style="color: #66D9EF; font-weight: bold">2</span><span style="color: #999">}</span><span style="color: #F92672">&gt;&lt;</span>span&nbsp;className<span style="color: #F92672">=</span><span style="color: #E6DB74">&quot;label&quot;</span>&nbsp;eventTarget&nbsp;<span style="color: #F92672">/&gt;&lt;/</span>TodoItem<span style="color: #F92672">&gt;</span><span style="color: #999">,</span></div><div>&nbsp;&nbsp;<span style="color: #E6DB74">'to&nbsp;contain'</span><span style="color: #999">,</span></div><div>&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>TodoItem&nbsp;id<span style="color: #F92672">=</span><span style="color: #999">{</span><span style="color: #66D9EF; font-weight: bold">2</span><span style="color: #999">}</span><span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>div&nbsp;className<span style="color: #F92672">=</span><span style="color: #E6DB74">'completed'</span><span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>span<span style="color: #F92672">&gt;</span>Completed<span style="color: #F92672">!&lt;/</span>span<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;/</span>div<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;<span style="color: #F92672">&lt;/</span>TodoItem<span style="color: #F92672">&gt;</span></div><div><span style="color: #999">);</span></div></div><ul>
<li>Locating a component with <code>queried for</code> then validating the render</li>
</ul>
<div class="code lang-javascript"><div>expect<span style="color: #999">(</span></div><div>&nbsp;&nbsp;todoList<span style="color: #999">,</span></div><div>&nbsp;&nbsp;<span style="color: #E6DB74">'queried&nbsp;for'</span><span style="color: #999">,</span>&nbsp;<span style="color: #F92672">&lt;</span>TodoItem&nbsp;id<span style="color: #F92672">=</span><span style="color: #999">{</span><span style="color: #66D9EF; font-weight: bold">2</span><span style="color: #999">}</span>&nbsp;<span style="color: #F92672">/&gt;</span><span style="color: #999">,</span></div><div>&nbsp;&nbsp;<span style="color: #E6DB74">'to&nbsp;have&nbsp;rendered'</span><span style="color: #999">,</span></div><div>&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>TodoItem&nbsp;id<span style="color: #F92672">=</span><span style="color: #999">{</span><span style="color: #66D9EF; font-weight: bold">2</span><span style="color: #999">}</span><span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>div&nbsp;className<span style="color: #F92672">=</span><span style="color: #E6DB74">'completed'</span><span style="color: #F92672">/&gt;</span></div><div>&nbsp;&nbsp;<span style="color: #F92672">&lt;/</span>TodoItem<span style="color: #F92672">&gt;</span></div><div><span style="color: #999">);</span></div></div><ul>
<li>Locating a component and then checking the state of the component with the full renderer</li>
</ul>
<div class="code lang-javascript"><div>expect<span style="color: #999">(</span>todoList<span style="color: #999">,</span></div><div>&nbsp;&nbsp;<span style="color: #E6DB74">'with&nbsp;event&nbsp;click'</span><span style="color: #999">,</span></div><div>&nbsp;&nbsp;<span style="color: #E6DB74">'on'</span><span style="color: #999">,</span>&nbsp;<span style="color: #F92672">&lt;</span>TodoItem&nbsp;id<span style="color: #F92672">=</span><span style="color: #999">{</span><span style="color: #66D9EF; font-weight: bold">1</span><span style="color: #999">}</span><span style="color: #F92672">&gt;&lt;</span>span&nbsp;className<span style="color: #F92672">=</span><span style="color: #E6DB74">&quot;label&quot;</span>&nbsp;eventTarget&nbsp;<span style="color: #F92672">/&gt;&lt;/</span>TodoItem<span style="color: #F92672">&gt;</span><span style="color: #999">,</span></div><div>&nbsp;&nbsp;<span style="color: #E6DB74">'queried&nbsp;for'</span><span style="color: #999">,</span>&nbsp;<span style="color: #F92672">&lt;</span>TodoItem&nbsp;id<span style="color: #F92672">=</span><span style="color: #999">{</span><span style="color: #66D9EF; font-weight: bold">1</span><span style="color: #999">}</span>&nbsp;<span style="color: #F92672">/&gt;</span></div><div><span style="color: #999">).</span>then<span style="color: #999">(</span>todoItem&nbsp;<span style="color: #F92672">=&gt;</span>&nbsp;<span style="color: #999">{</span></div><div>&nbsp;<span style="color: #888">&nbsp;//&nbsp;Here&nbsp;we're&nbsp;checking&nbsp;the&nbsp;state,&nbsp;but&nbsp;we&nbsp;could&nbsp;perform</span></div><div>&nbsp;<span style="color: #888">&nbsp;//&nbsp;any&nbsp;operation&nbsp;on&nbsp;the&nbsp;instance&nbsp;of&nbsp;the&nbsp;component.</span></div><div>&nbsp;&nbsp;expect<span style="color: #999">(</span>todoItem<span style="color: #999">.</span>state<span style="color: #999">,</span>&nbsp;<span style="color: #E6DB74">'to&nbsp;satisfy'</span><span style="color: #999">,</span>&nbsp;<span style="color: #999">{</span>&nbsp;completed<span style="color: #999">:</span>&nbsp;<span style="color: #66D9EF; font-weight: bold">true</span>&nbsp;<span style="color: #999">});</span></div><div><span style="color: #999">});</span></div></div><ul>
<li>Calling an event and validating the output using the test renderer</li>
</ul>
<div class="code lang-javascript"><div>const&nbsp;unexpected&nbsp;<span style="color: #F92672">=</span>&nbsp;require<span style="color: #999">(</span><span style="color: #E6DB74">'unexpected'</span><span style="color: #999">);</span></div><div>const&nbsp;React&nbsp;<span style="color: #F92672">=</span>&nbsp;require<span style="color: #999">(</span><span style="color: #E6DB74">'react'</span><span style="color: #999">);</span></div><div>const&nbsp;TestRenderer&nbsp;<span style="color: #F92672">=</span>&nbsp;require<span style="color: #999">(</span><span style="color: #E6DB74">'react-test-renderer'</span><span style="color: #999">);</span></div><div>const&nbsp;expect&nbsp;<span style="color: #F92672">=</span>&nbsp;unexpected<span style="color: #999">.</span>clone<span style="color: #999">().</span>use<span style="color: #999">(</span>require<span style="color: #999">(</span><span style="color: #E6DB74">'unexpected-react/test-renderer'</span><span style="color: #999">));</span></div><div>&nbsp;</div><div>describe<span style="color: #999">(</span><span style="color: #E6DB74">'ClickCounterButton'</span><span style="color: #999">,</span>&nbsp;<span style="color: #F92672">function</span>&nbsp;<span style="color: #999">()</span>&nbsp;<span style="color: #999">{</span></div><div>&nbsp;</div><div>&nbsp;&nbsp;it<span style="color: #999">(</span><span style="color: #E6DB74">'shows&nbsp;the&nbsp;increased&nbsp;click&nbsp;count&nbsp;after&nbsp;a&nbsp;click&nbsp;event'</span><span style="color: #999">,</span>&nbsp;<span style="color: #F92672">function</span>&nbsp;<span style="color: #999">()</span>&nbsp;<span style="color: #999">{</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;renderer&nbsp;<span style="color: #F92672">=</span>&nbsp;TestRenderer<span style="color: #999">.</span>create<span style="color: #999">(</span><span style="color: #F92672">&lt;</span>ClickCounterButton&nbsp;<span style="color: #F92672">/&gt;</span><span style="color: #999">);</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;expect<span style="color: #999">(</span>renderer<span style="color: #999">,</span>&nbsp;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #E6DB74">'with&nbsp;event'</span><span style="color: #999">,</span>&nbsp;<span style="color: #E6DB74">'click'</span><span style="color: #999">,</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #E6DB74">'to&nbsp;have&nbsp;rendered'</span><span style="color: #999">,</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>button<span style="color: #F92672">&gt;</span>Clicked&nbsp;<span style="color: #999">{</span><span style="color: #66D9EF; font-weight: bold">1</span><span style="color: #999">}</span>&nbsp;time<span style="color: #F92672">&lt;/</span>button<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #999">);</span></div><div>&nbsp;&nbsp;<span style="color: #999">});</span></div><div><span style="color: #999">});</span></div></div><h1 id="usage">Usage</h1>
<div class="code lang-"><div>npm&nbsp;install&nbsp;--save-dev&nbsp;unexpected&nbsp;unexpected-react</div></div><h2 id="initialising">Initialising</h2>
<h3 id="with-the-shallow-renderer">With the shallow renderer</h3>
<div class="code lang-javascript"><div>&nbsp;</div><div><span style="color: #F92672">var</span>&nbsp;unexpected&nbsp;<span style="color: #F92672">=</span>&nbsp;require<span style="color: #999">(</span><span style="color: #E6DB74">'unexpected'</span><span style="color: #999">);</span></div><div><span style="color: #F92672">var</span>&nbsp;unexpectedReact&nbsp;<span style="color: #F92672">=</span>&nbsp;require<span style="color: #999">(</span><span style="color: #E6DB74">'unexpected-react'</span><span style="color: #999">);</span></div><div>&nbsp;</div><div><span style="color: #F92672">var</span>&nbsp;React&nbsp;<span style="color: #F92672">=</span>&nbsp;require<span style="color: #999">(</span><span style="color: #E6DB74">'react'</span><span style="color: #999">);</span></div><div><span style="color: #F92672">var</span>&nbsp;ReactTestUtils&nbsp;<span style="color: #F92672">=</span>&nbsp;require<span style="color: #999">(</span><span style="color: #E6DB74">'react-addons-test-utils'</span><span style="color: #999">);</span></div><div>&nbsp;</div><div><span style="color: #888">//&nbsp;Require&nbsp;the&nbsp;component&nbsp;we&nbsp;want&nbsp;to&nbsp;test</span></div><div><span style="color: #F92672">var</span>&nbsp;MyComponent&nbsp;<span style="color: #F92672">=</span>&nbsp;require<span style="color: #999">(</span><span style="color: #E6DB74">'../MyComponent'</span><span style="color: #999">);</span></div><div>&nbsp;</div><div><span style="color: #888">//&nbsp;Declare&nbsp;our&nbsp;`expect`&nbsp;instance&nbsp;to&nbsp;use&nbsp;unexpected-react</span></div><div><span style="color: #F92672">var</span>&nbsp;expect&nbsp;<span style="color: #F92672">=</span>&nbsp;unexpected<span style="color: #999">.</span>clone<span style="color: #999">()</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #999">.</span>use<span style="color: #999">(</span>unexpectedReact<span style="color: #999">);</span></div><div>&nbsp;</div><div>describe<span style="color: #999">(</span><span style="color: #E6DB74">'MyComponent'</span><span style="color: #999">,</span>&nbsp;<span style="color: #F92672">function</span>&nbsp;<span style="color: #999">()</span>&nbsp;<span style="color: #999">{</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;it<span style="color: #999">(</span><span style="color: #E6DB74">'renders&nbsp;a&nbsp;button'</span><span style="color: #999">,</span>&nbsp;<span style="color: #F92672">function</span>&nbsp;<span style="color: #999">()</span>&nbsp;<span style="color: #999">{</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">var</span>&nbsp;renderer&nbsp;<span style="color: #F92672">=</span>&nbsp;ReactTestUtils<span style="color: #999">.</span>createRenderer<span style="color: #999">();</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;renderer<span style="color: #999">.</span>render<span style="color: #999">(</span><span style="color: #F92672">&lt;</span>MyComponent&nbsp;<span style="color: #F92672">/&gt;</span><span style="color: #999">);</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expect<span style="color: #999">(</span>renderer<span style="color: #999">,</span>&nbsp;<span style="color: #E6DB74">'to&nbsp;have&nbsp;rendered'</span><span style="color: #999">,</span>&nbsp;<span style="color: #F92672">&lt;</span>button<span style="color: #F92672">&gt;</span>Click&nbsp;me<span style="color: #F92672">&lt;/</span>button<span style="color: #F92672">&gt;</span><span style="color: #999">);</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #999">});</span></div><div><span style="color: #999">});</span></div><div>&nbsp;</div></div><h3 id="with-the-test-renderer-https-www-npmjs-com-package-react-test-renderer-">With the <a href="https://www.npmjs.com/package/react-test-renderer">test renderer</a></h3>
<p>If you want to use the <a href="https://www.npmjs.com/package/react-test-renderer">react-test-renderer</a>, then <strong><code>require(&#39;unexpected-react/test-renderer&#39;)</code></strong></p>
<div class="code lang-javascript"><div>&nbsp;</div><div><span style="color: #F92672">var</span>&nbsp;unexpected&nbsp;<span style="color: #F92672">=</span>&nbsp;require<span style="color: #999">(</span><span style="color: #E6DB74">'unexpected'</span><span style="color: #999">);</span></div><div>&nbsp;</div><div><span style="color: #888">//&nbsp;Note&nbsp;that&nbsp;for&nbsp;the&nbsp;test-renderer,&nbsp;we&nbsp;need&nbsp;a&nbsp;different&nbsp;`require`</span></div><div><span style="color: #F92672">var</span>&nbsp;unexpectedReact&nbsp;<span style="color: #F92672">=</span>&nbsp;require<span style="color: #999">(</span><span style="color: #E6DB74">'unexpected-react/test-renderer'</span><span style="color: #999">);</span></div><div>&nbsp;</div><div><span style="color: #F92672">var</span>&nbsp;React&nbsp;<span style="color: #F92672">=</span>&nbsp;require<span style="color: #999">(</span><span style="color: #E6DB74">'react'</span><span style="color: #999">);</span></div><div><span style="color: #F92672">var</span>&nbsp;TestRenderer&nbsp;<span style="color: #F92672">=</span>&nbsp;require<span style="color: #999">(</span><span style="color: #E6DB74">'react-test-renderer'</span><span style="color: #999">);</span></div><div>&nbsp;</div><div><span style="color: #F92672">var</span>&nbsp;MyComponent&nbsp;<span style="color: #F92672">=</span>&nbsp;require<span style="color: #999">(</span><span style="color: #E6DB74">'../MyComponent'</span><span style="color: #999">);</span></div><div>&nbsp;</div><div><span style="color: #888">//&nbsp;define&nbsp;our&nbsp;instance&nbsp;of&nbsp;the&nbsp;`expect`&nbsp;function&nbsp;to&nbsp;use&nbsp;unexpected-react</span></div><div>const&nbsp;expect&nbsp;<span style="color: #F92672">=</span>&nbsp;unexpected<span style="color: #999">.</span>clone<span style="color: #999">()</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #999">.</span>use<span style="color: #999">(</span>unexpectedReact<span style="color: #999">);</span></div><div>&nbsp;</div><div>&nbsp;</div><div>describe<span style="color: #999">(</span><span style="color: #E6DB74">'MyComponent'</span><span style="color: #999">,</span>&nbsp;<span style="color: #F92672">function</span>&nbsp;<span style="color: #999">()</span>&nbsp;<span style="color: #999">{</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;it<span style="color: #999">(</span><span style="color: #E6DB74">'renders&nbsp;a&nbsp;button'</span><span style="color: #999">,</span>&nbsp;<span style="color: #F92672">function</span>&nbsp;<span style="color: #999">()</span>&nbsp;<span style="color: #999">{</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">var</span>&nbsp;renderer&nbsp;<span style="color: #F92672">=</span>&nbsp;TestRenderer<span style="color: #999">.</span>create<span style="color: #999">(</span><span style="color: #F92672">&lt;</span>MyComponent&nbsp;<span style="color: #F92672">/&gt;</span><span style="color: #999">);</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expect<span style="color: #999">(</span>renderer<span style="color: #999">,</span>&nbsp;<span style="color: #E6DB74">'to&nbsp;have&nbsp;rendered'</span><span style="color: #999">,</span>&nbsp;<span style="color: #F92672">&lt;</span>button<span style="color: #F92672">&gt;</span>Click&nbsp;me<span style="color: #F92672">&lt;/</span>button<span style="color: #F92672">&gt;</span><span style="color: #999">);</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #999">});</span></div><div><span style="color: #999">});</span></div></div><h3 id="with-the-full-virtual-dom-all-custom-components-and-the-dom-elements-">With the full virtual DOM (all custom components AND the DOM elements)</h3>
<p>If you want to assert over the whole virtual DOM, then you need to emulate the DOM 
(note this library is not designed for use in the browser - it may be possible, but at the 
very least, you&#39;ll need to disable the react-devtools)</p>
<p>If you don&#39;t need the virtual DOM, and you&#39;re just using the <a href="http://facebook.github.io/react/docs/test-utils.html#shallow-rendering">shallow renderer</a>,
then the order of the requires is not important, and you obviously don&#39;t need the <code>emulateDom.js</code> require.</p>
<p>The <strong>order of <code>require</code>&#39;s is important</strong>. <code>unexpected-react</code> must be required <strong>before</strong> <code>react</code> is required. That means <code>unexpected-react</code> must be required
before any other file is required that requires React (e.g. your components!)</p>
<p>(You can also use the shallow renderer interchangeably with this setup)</p>
<div class="code lang-javascript"><div><span style="color: #888">//&nbsp;First&nbsp;require&nbsp;your&nbsp;DOM&nbsp;emulation&nbsp;file&nbsp;(see&nbsp;below)</span></div><div>require<span style="color: #999">(</span>&nbsp;<span style="color: #E6DB74">'../testHelpers/emulateDom'</span><span style="color: #999">);</span></div><div>&nbsp;</div><div><span style="color: #F92672">var</span>&nbsp;unexpected&nbsp;<span style="color: #F92672">=</span>&nbsp;require<span style="color: #999">(</span><span style="color: #E6DB74">'unexpected'</span><span style="color: #999">);</span></div><div>&nbsp;</div><div><span style="color: #888">//&nbsp;then&nbsp;require&nbsp;unexpected-react</span></div><div><span style="color: #F92672">var</span>&nbsp;unexpectedReact&nbsp;<span style="color: #F92672">=</span>&nbsp;require<span style="color: #999">(</span><span style="color: #E6DB74">'unexpected-react'</span><span style="color: #999">);</span></div><div>&nbsp;</div><div><span style="color: #888">//&nbsp;then&nbsp;react</span></div><div><span style="color: #F92672">var</span>&nbsp;React&nbsp;<span style="color: #F92672">=</span>&nbsp;require<span style="color: #999">(</span><span style="color: #E6DB74">'react'</span><span style="color: #999">);</span></div><div>&nbsp;</div><div><span style="color: #888">//&nbsp;...and&nbsp;optionally&nbsp;the&nbsp;addons</span></div><div><span style="color: #F92672">var</span>&nbsp;TestUtils&nbsp;<span style="color: #F92672">=</span>&nbsp;require<span style="color: #999">(</span><span style="color: #E6DB74">'react-addons-test-utils'</span><span style="color: #999">);</span></div><div>&nbsp;</div><div><span style="color: #888">//&nbsp;then&nbsp;our&nbsp;component(s)</span></div><div><span style="color: #F92672">var</span>&nbsp;MyComponent&nbsp;<span style="color: #F92672">=</span>&nbsp;require<span style="color: #999">(</span>'<span style="color: #999">..</span><span style="color: #F92672">/</span>MyComponent<span style="color: #999">);</span></div><div>&nbsp;</div><div><span style="color: #888">//&nbsp;define&nbsp;our&nbsp;instance&nbsp;of&nbsp;the&nbsp;`expect`&nbsp;function&nbsp;to&nbsp;use&nbsp;unexpected-react</span></div><div>const&nbsp;expect&nbsp;<span style="color: #F92672">=</span>&nbsp;unexpected<span style="color: #999">.</span>clone<span style="color: #999">()</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #999">.</span>use<span style="color: #999">(</span>unexpectedReact<span style="color: #999">);</span></div><div>&nbsp;</div><div>describe<span style="color: #999">(</span><span style="color: #E6DB74">'MyComponent'</span><span style="color: #999">,</span>&nbsp;<span style="color: #F92672">function</span>&nbsp;<span style="color: #999">()</span>&nbsp;<span style="color: #999">{</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;it<span style="color: #999">(</span><span style="color: #E6DB74">'renders&nbsp;a&nbsp;button'</span><span style="color: #999">,</span>&nbsp;<span style="color: #F92672">function</span>&nbsp;<span style="color: #999">()</span>&nbsp;<span style="color: #999">{</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">var</span>&nbsp;component&nbsp;<span style="color: #F92672">=</span>&nbsp;TestUtils<span style="color: #999">.</span>renderIntoDocument<span style="color: #999">(</span><span style="color: #F92672">&lt;</span>MyComponent&nbsp;<span style="color: #F92672">/&gt;</span><span style="color: #999">);</span></div><div>&nbsp;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #888">&nbsp;//&nbsp;All&nbsp;custom&nbsp;components&nbsp;and&nbsp;DOM&nbsp;elements&nbsp;are&nbsp;included&nbsp;in&nbsp;the&nbsp;tree,</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #888">&nbsp;//&nbsp;so&nbsp;you&nbsp;can&nbsp;assert&nbsp;to&nbsp;whatever&nbsp;level&nbsp;you&nbsp;wish</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expect<span style="color: #999">(</span>component<span style="color: #999">,</span>&nbsp;<span style="color: #E6DB74">'to&nbsp;have&nbsp;rendered'</span><span style="color: #999">,</span>&nbsp;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>MyComponent<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>button<span style="color: #F92672">&gt;</span>Click&nbsp;me<span style="color: #F92672">&lt;/</span>button<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;/</span>MyComponent<span style="color: #F92672">&gt;</span><span style="color: #999">);</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #999">});</span></div><div><span style="color: #999">});</span></div></div><h2 id="emulating-the-dom">Emulating the DOM</h2>
<p>The <code>emulateDom</code> file depends on whether you want to use <a href="https://npmjs.com/package/domino"><code>domino</code></a>, or <a href="https://npmjs.com/package/jsdom"><code>jsdom</code></a></p>
<p>For <code>jsdom</code>:</p>
<div class="code lang-javascript"><div><span style="color: #888">//&nbsp;emulateDom.js&nbsp;-&nbsp;jsdom&nbsp;variant</span></div><div>&nbsp;</div><div><span style="color: #F92672">if</span>&nbsp;<span style="color: #999">(</span><span style="color: #F92672">typeof</span>&nbsp;document&nbsp;<span style="color: #F92672">===</span>&nbsp;<span style="color: #E6DB74">'undefined'</span><span style="color: #999">)</span>&nbsp;<span style="color: #999">{</span></div><div>&nbsp;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;jsdom&nbsp;<span style="color: #F92672">=</span>&nbsp;require<span style="color: #999">(</span><span style="color: #E6DB74">'jsdom'</span><span style="color: #999">).</span>jsdom<span style="color: #999">;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;global<span style="color: #999">.</span>document&nbsp;<span style="color: #F92672">=</span>&nbsp;jsdom<span style="color: #999">(</span><span style="color: #E6DB74">''</span><span style="color: #999">);</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;global<span style="color: #999">.</span>window&nbsp;<span style="color: #F92672">=</span>&nbsp;global<span style="color: #999">.</span>document<span style="color: #999">.</span>defaultView<span style="color: #999">;</span></div><div>&nbsp;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">for</span>&nbsp;<span style="color: #999">(</span><span style="color: #F92672">let</span>&nbsp;key&nbsp;<span style="color: #F92672">in</span>&nbsp;global<span style="color: #999">.</span>window<span style="color: #999">)</span>&nbsp;<span style="color: #999">{</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">if</span>&nbsp;<span style="color: #999">(</span><span style="color: #F92672">!</span>global<span style="color: #999">[</span>key<span style="color: #999">])</span>&nbsp;<span style="color: #999">{</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;global<span style="color: #999">[</span>key<span style="color: #999">]</span>&nbsp;<span style="color: #F92672">=</span>&nbsp;global<span style="color: #999">.</span>window<span style="color: #999">[</span>key<span style="color: #999">];</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #999">}</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #999">}</span></div><div><span style="color: #999">}</span></div></div><p>For <code>domino</code>:</p>
<div class="code lang-javascript"><div><span style="color: #888">//&nbsp;emulateDom.js&nbsp;-&nbsp;domino&nbsp;variant</span></div><div>&nbsp;</div><div><span style="color: #F92672">if</span>&nbsp;<span style="color: #999">(</span><span style="color: #F92672">typeof</span>&nbsp;document&nbsp;<span style="color: #F92672">===</span>&nbsp;<span style="color: #E6DB74">'undefined'</span><span style="color: #999">)</span>&nbsp;<span style="color: #999">{</span></div><div>&nbsp;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;domino&nbsp;<span style="color: #F92672">=</span>&nbsp;require<span style="color: #999">(</span><span style="color: #E6DB74">'domino'</span><span style="color: #999">);</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;global<span style="color: #999">.</span>window&nbsp;<span style="color: #F92672">=</span>&nbsp;domino<span style="color: #999">.</span>createWindow<span style="color: #999">(</span><span style="color: #E6DB74">''</span><span style="color: #999">);</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;global<span style="color: #999">.</span>document&nbsp;<span style="color: #F92672">=</span>&nbsp;global<span style="color: #999">.</span>window<span style="color: #999">.</span>document<span style="color: #999">;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;global<span style="color: #999">.</span>navigator&nbsp;<span style="color: #F92672">=</span>&nbsp;<span style="color: #999">{</span>&nbsp;userAgent<span style="color: #999">:</span>&nbsp;<span style="color: #E6DB74">'domino'</span>&nbsp;<span style="color: #999">};</span></div><div>&nbsp;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">for</span>&nbsp;<span style="color: #999">(</span><span style="color: #F92672">let</span>&nbsp;key&nbsp;<span style="color: #F92672">in</span>&nbsp;global<span style="color: #999">.</span>window<span style="color: #999">)</span>&nbsp;<span style="color: #999">{</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">if</span>&nbsp;<span style="color: #999">(</span><span style="color: #F92672">!</span>global<span style="color: #999">[</span>key<span style="color: #999">])</span>&nbsp;<span style="color: #999">{</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;global<span style="color: #999">[</span>key<span style="color: #999">]</span>&nbsp;<span style="color: #F92672">=</span>&nbsp;global<span style="color: #999">.</span>window<span style="color: #999">[</span>key<span style="color: #999">];</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #999">}</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #999">}</span></div><div><span style="color: #999">}</span></div></div><h1 id="react-compatibility">React Compatibility</h1>
<p>v3.x.x is compatible with React v0.14.x and v15.
v2.x.x is compatible with React v0.13.x and v0.14.x</p>
<p>It is not planned to make further releases of the v2 branch, but if you still need 0.13 support,
and are missing things from v3, please raise an issue.</p>
<h1 id="tests">Tests</h1>
<p>For the shallow renderer, you can assert on the renderer itself (you can also write the same assertion for the result of <code>getRenderOutput()</code>)</p>
<div class="code lang-javascript"><div><span style="color: #F92672">var</span>&nbsp;renderer&nbsp;<span style="color: #F92672">=</span>&nbsp;TestUtils<span style="color: #999">.</span>createRenderer<span style="color: #999">();</span></div><div>&nbsp;</div><div>renderer<span style="color: #999">.</span>render<span style="color: #999">(</span><span style="color: #F92672">&lt;</span>MyButton&nbsp;<span style="color: #F92672">/&gt;</span><span style="color: #999">);</span></div><div>&nbsp;</div><div>expect<span style="color: #999">(</span>renderer<span style="color: #999">,</span>&nbsp;<span style="color: #E6DB74">'to&nbsp;have&nbsp;rendered'</span><span style="color: #999">,</span></div><div>&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>button<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Button&nbsp;was&nbsp;clicked&nbsp;<span style="color: #66D9EF; font-weight: bold">1</span>&nbsp;times</div><div>&nbsp;&nbsp;<span style="color: #F92672">&lt;/</span>button<span style="color: #F92672">&gt;</span></div><div><span style="color: #999">);</span></div></div><p>If this fails for some reason, you get a nicely formatted error, with the differences highlighted:</p>
<div class="output"><div><span style="color: #F92672; font-weight: bold">TestUtils&nbsp;is&nbsp;not&nbsp;defined</span></div></div><p>If you&#39;ve emulated the DOM, you can write a similar test, but using <code>ReactDOM.render()</code> (or <code>TestUtils.renderIntoDocument()</code>)</p>
<div class="code lang-javascript"><div><span style="color: #F92672">var</span>&nbsp;component&nbsp;<span style="color: #F92672">=</span>&nbsp;TestUtils<span style="color: #999">.</span>renderIntoDocument<span style="color: #999">(</span><span style="color: #F92672">&lt;</span>MyButton<span style="color: #F92672">/&gt;</span><span style="color: #999">)</span></div><div>expect<span style="color: #999">(</span>component<span style="color: #999">,</span>&nbsp;<span style="color: #E6DB74">'to&nbsp;have&nbsp;rendered'</span><span style="color: #999">,</span></div><div>&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>button<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Button&nbsp;was&nbsp;clicked&nbsp;<span style="color: #66D9EF; font-weight: bold">1</span>&nbsp;times</div><div>&nbsp;&nbsp;<span style="color: #F92672">&lt;/</span>button<span style="color: #F92672">&gt;</span></div><div><span style="color: #999">);</span></div></div><div class="output"><div><span style="color: #F92672; font-weight: bold">TestUtils&nbsp;is&nbsp;not&nbsp;defined</span></div></div><p>Note the major difference between the shallow renderer and the &quot;normal&quot; renderer, is that child components are also
rendered.  That is easier to see with these example components:</p>
<div class="code lang-javascript"><div>&nbsp;</div><div><span style="color: #F92672">var</span>&nbsp;Text&nbsp;<span style="color: #F92672">=</span>&nbsp;React<span style="color: #999">.</span>createClass<span style="color: #999">({</span></div><div>&nbsp;&nbsp;&nbsp;render<span style="color: #999">()</span>&nbsp;<span style="color: #999">{</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">return</span>&nbsp;<span style="color: #F92672">&lt;</span>span<span style="color: #F92672">&gt;</span><span style="color: #999">{</span><span style="color: #F92672">this</span><span style="color: #999">.</span>props<span style="color: #999">.</span>content<span style="color: #999">}</span><span style="color: #F92672">&lt;/</span>span<span style="color: #F92672">&gt;</span><span style="color: #999">;</span></div><div>&nbsp;&nbsp;&nbsp;<span style="color: #999">}</span></div><div><span style="color: #999">});</span></div><div>&nbsp;</div><div><span style="color: #F92672">var</span>&nbsp;App&nbsp;<span style="color: #F92672">=</span>&nbsp;React<span style="color: #999">.</span>createClass<span style="color: #999">({</span></div><div>&nbsp;&nbsp;&nbsp;render<span style="color: #999">()</span>&nbsp;<span style="color: #999">{</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">return</span>&nbsp;<span style="color: #999">(</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>div&nbsp;className<span style="color: #F92672">=</span><span style="color: #E6DB74">&quot;testing-is-fun&quot;</span><span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>Text&nbsp;content<span style="color: #F92672">=</span><span style="color: #E6DB74">&quot;hello&quot;</span>&nbsp;<span style="color: #F92672">/&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>Text&nbsp;content<span style="color: #F92672">=</span><span style="color: #E6DB74">&quot;world&quot;</span>&nbsp;<span style="color: #F92672">/&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;/</span>div<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #999">);</span></div><div>&nbsp;&nbsp;&nbsp;<span style="color: #999">}</span></div><div><span style="color: #999">});</span></div><div>&nbsp;</div></div><p>Rendering the <code>App</code> component with the shallow renderer will not render the <code>span</code>s, only the 
<code>Text</code> component with the props.  If you wanted to test for the content of the span elements, you&#39;d 
need to use <code>TestUtils.renderIntoDocument(...)</code>, or <code>ReactDOM.render(...)</code></p>
<p>Because unexpected-react` by default ignores wrapper elements, and also &quot;extra&quot; children (child
nodes that appear in the actual render, but are not in the expected result), it is possible to 
test both scenarios with the full renderer. To demonstrate, all the following tests will pass:</p>
<div class="code lang-javascript"><div><span style="color: #F92672">var</span>&nbsp;component&nbsp;<span style="color: #F92672">=</span>&nbsp;TestUtils<span style="color: #999">.</span>renderIntoDocument<span style="color: #999">(</span><span style="color: #F92672">&lt;</span>App&nbsp;<span style="color: #F92672">/&gt;</span><span style="color: #999">);</span></div><div>&nbsp;</div><div><span style="color: #888">//&nbsp;renders&nbsp;the&nbsp;Text&nbsp;components&nbsp;with&nbsp;the&nbsp;spans&nbsp;with&nbsp;the&nbsp;full&nbsp;renderer</span></div><div>expect<span style="color: #999">(</span>component<span style="color: #999">,</span>&nbsp;<span style="color: #E6DB74">'to&nbsp;have&nbsp;rendered'</span><span style="color: #999">,</span>&nbsp;</div><div>&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>App<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>div&nbsp;className<span style="color: #F92672">=</span><span style="color: #E6DB74">&quot;testing-is-fun&quot;</span><span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>Text&nbsp;content<span style="color: #F92672">=</span><span style="color: #E6DB74">&quot;hello&quot;</span><span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>span<span style="color: #F92672">&gt;</span>hello<span style="color: #F92672">&lt;/</span>span<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;/</span>Text<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>Text&nbsp;content<span style="color: #F92672">=</span><span style="color: #E6DB74">&quot;world&quot;</span><span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>span<span style="color: #F92672">&gt;</span>world<span style="color: #F92672">&lt;/</span>span<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;/</span>Text<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;/</span>div<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;<span style="color: #F92672">&lt;/</span>App<span style="color: #F92672">&gt;</span></div><div><span style="color: #999">);</span></div></div><div class="code lang-javascript"><div><span style="color: #888">//&nbsp;renders&nbsp;the&nbsp;Text&nbsp;nodes&nbsp;with&nbsp;the&nbsp;full&nbsp;renderer'</span></div><div>&nbsp;</div><div>expect<span style="color: #999">(</span>component<span style="color: #999">,</span>&nbsp;<span style="color: #E6DB74">'to&nbsp;have&nbsp;rendered'</span><span style="color: #999">,</span>&nbsp;</div><div>&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>div&nbsp;className<span style="color: #F92672">=</span><span style="color: #E6DB74">&quot;testing-is-fun&quot;</span><span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>Text&nbsp;content<span style="color: #F92672">=</span><span style="color: #E6DB74">&quot;hello&quot;</span>&nbsp;<span style="color: #F92672">/&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>Text&nbsp;content<span style="color: #F92672">=</span><span style="color: #E6DB74">&quot;world&quot;</span>&nbsp;<span style="color: #F92672">/&gt;</span></div><div>&nbsp;&nbsp;<span style="color: #F92672">&lt;/</span>div<span style="color: #F92672">&gt;</span></div><div><span style="color: #999">);</span></div></div><div class="code lang-javascript"><div><span style="color: #888">//&nbsp;renders&nbsp;the&nbsp;spans&nbsp;with&nbsp;the&nbsp;full&nbsp;renderer</span></div><div>&nbsp;</div><div>expect<span style="color: #999">(</span>component<span style="color: #999">,</span>&nbsp;<span style="color: #E6DB74">'to&nbsp;have&nbsp;rendered'</span><span style="color: #999">,</span>&nbsp;</div><div>&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>div&nbsp;className<span style="color: #F92672">=</span><span style="color: #E6DB74">&quot;testing-is-fun&quot;</span><span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>span<span style="color: #F92672">&gt;</span>hello<span style="color: #F92672">&lt;/</span>span<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>span<span style="color: #F92672">&gt;</span>world<span style="color: #F92672">&lt;/</span>span<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;<span style="color: #F92672">&lt;/</span>div<span style="color: #F92672">&gt;</span></div><div><span style="color: #999">);</span></div><div>&nbsp;</div></div><p>The first test shows the full virtual DOM that gets rendered. The second test skips the <code>&lt;App&gt;</code> &quot;wrapper&quot; 
component, and leaves out the <code>&lt;span&gt;</code> children of the <code>&lt;Text&gt;</code> components. The third tests skips both 
the <code>&lt;App&gt;</code> wrapper component, and the <code>&lt;Text&gt;</code> wrapper component.</p>
<h2 id="stateless-components">Stateless components</h2>
<p>Because <a href="https://facebook.github.io/react/docs/reusable-components.html#stateless-functions">stateless components</a> can&#39;t be instantiated, <code>renderIntoDocument</code> won&#39;t return an instance back. 
Using the shallow renderer works as shown in the first example. 
For full rendering, they can be tested with a wrapper component as such:</p>
<div class="code lang-javascript"><div>class&nbsp;StatelessWrapper&nbsp;extends&nbsp;React<span style="color: #999">.</span>Component&nbsp;<span style="color: #999">{</span></div><div>&nbsp;&nbsp;render<span style="color: #999">()</span>&nbsp;<span style="color: #999">{</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">return</span>&nbsp;<span style="color: #999">(</span><span style="color: #F92672">this</span><span style="color: #999">.</span>props<span style="color: #999">.</span>children<span style="color: #999">);</span></div><div>&nbsp;&nbsp;<span style="color: #999">}</span></div><div><span style="color: #999">}</span></div><div>&nbsp;</div><div><span style="color: #F92672">var</span>&nbsp;StatelessComponent&nbsp;<span style="color: #F92672">=</span>&nbsp;<span style="color: #F92672">function</span>&nbsp;<span style="color: #999">(</span>props<span style="color: #999">)</span>&nbsp;<span style="color: #999">{</span></div><div>&nbsp;&nbsp;<span style="color: #F92672">return</span>&nbsp;<span style="color: #999">(</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>div<span style="color: #F92672">&gt;</span><span style="color: #999">{</span>&nbsp;props<span style="color: #999">.</span>name&nbsp;<span style="color: #999">}</span><span style="color: #F92672">&lt;/</span>div<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;<span style="color: #999">)</span></div><div><span style="color: #999">}</span></div><div>&nbsp;</div><div><span style="color: #F92672">var</span>&nbsp;component&nbsp;<span style="color: #F92672">=</span>&nbsp;TestUtils<span style="color: #999">.</span>renderIntoDocument<span style="color: #999">(</span><span style="color: #F92672">&lt;</span>StatelessWrapper<span style="color: #F92672">&gt;&lt;</span>StatelessComponent&nbsp;name<span style="color: #F92672">=</span><span style="color: #E6DB74">&quot;Daniel&quot;</span>&nbsp;<span style="color: #F92672">/&gt;&lt;/</span>StatelessWrapper<span style="color: #F92672">&gt;</span><span style="color: #999">);</span></div></div><h2 id="cleaning-up">Cleaning up</h2>
<p>When using the normal renderer, unexpected-react makes use of <a href="https://npmjs.org/package/react-render-hook"><code>react-render-hook</code></a>,
which utilises the code from the <a href="https://github.com/facebook/react-devtools">React devtools</a>. As there is no way for <code>react-render-hook</code> 
to know when a test is completed, it has to keep a reference to every rendered component. Whilst this shouldn&#39;t normally be an issue,
if you use a test runner that keeps the process alive (such as <a href="http://wallabyjs.com">wallaby.js</a>), it is a good idea to call
<code>unexpectedReact.clearAll()</code> in a global <code>beforeEach()</code> or <code>afterEach()</code> block. This clears the cache of rendered nodes.</p>
<h2 id="roadmap-plans">Roadmap / Plans</h2>
<ul>
<li>[DONE] <del>There are some performance optimisations to do. The performance suffers a bit due to the possible asynchronous nature of the inline assertions. Most of the time these will be synchronous, and hence we don&#39;t need to pay the price.</del></li>
<li>[DONE] <del><code>queried for</code> implementation</del></li>
<li>[DONE] <del>Directly calling events on both the shallow renderer, and the full virtual DOM renderer</del></li>
<li>Support Snapshot testing in Jest</li>
<li>Cleanup output - where there are no differences to highlight, we could skip the branch</li>
</ul>
<h1 id="contributing">Contributing</h1>
<p>We welcome pull requests, bug reports, and extra test cases. If you find something that doesn&#39;t work
as you believe it should, or where the output isn&#39;t as good as it could be, raise an issue!</p>
<h2 id="thanks">Thanks</h2>
<p>Huge thanks to <a href="https://github.com/munter">@Munter</a> for <a href="https://github.com/munter/unexpected-dom">unexpected-dom</a>,
and along with <a href="https://github.com/dmatteo">@dmatteo</a> from Podio for handing over the unexpected-react name. </p>
<p><a href="http://unexpected.js.org">Unexpected</a> is a great library to work with, and I offer my sincere thanks to <a href="https://github.com/sunesimonsen">@sunesimonsen</a>
and <a href="https://github.com/papandreou">@papandreou</a>, who have created an assertion library that makes testing JavaScript a joy.</p>
<h2 id="license">License</h2>
<p>MIT</p>

    </div>
    <a class="github-ribbon" href="https://github.com/bruderstein/unexpected-react"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/a6677b08c955af8400f44c6298f40e7d19cc5b2d/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677261795f3664366436642e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"></a>
</div>
<script type="text/javascript">
    baseUrl = '.';
</script>
<script type="text/javascript" src="static/toggleSidebar.js"></script>
<script type="text/javascript" src="static/rememberScrollPosition.js"></script>
<script type="text/javascript" src="static/focusMain.js"></script>
<script type="text/javascript" src="static/search.js"></script>
</body>
</html>

